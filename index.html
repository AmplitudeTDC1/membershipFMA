<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ALESE CDA Finance Manager</title>
    <link rel="stylesheet" href="./css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar">
      <div class="logo-section">
        <img src="./assets/logo.png" alt="CDA Logo" class="logo" />
        <h1 class="brand-name">ALESE CDA</h1>
      </div>
      <div class="nav-links">
        <button class="btn" id="register-btn">Register New Member</button>
        <button class="btn" id="transaction-btn">Record a Transaction</button>

        <!-- Admin-only panel -->
        <div id="admin-panel" style="display: none">
          <span id="admin-name" class="admin-name"></span>
          <button id="logout-btn" class="btn btn-logout">Logout</button>
        </div>

        <button class="btn btn-admin" id="login-btn">Admin Sign In</button>
      </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
      <div class="hero-overlay">
        <h2>Empowering Our Community Through Transparency and Service</h2>
        <p>
          Track CDA levies, donations, and special projects with ease and trust.
        </p>
      </div>
    </header>

    <!-- Announcements -->
    <section class="announcements">
      <h3>Community Announcements</h3>
      <ul>
        <li>ðŸŽ‰ Town Hall Meeting on Saturday 10th</li>
        <li>ðŸ›  Special Project: Road Repairs begin next week</li>
      </ul>
    </section>

    <!-- Contact Us -->
    <section class="contact-us">
      <h3>Contact Us</h3>
      <p>Email: info@alese-cda.org</p>
      <p>Phone: +234 800 123 4567</p>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <p>&copy; 2025 ALESE CDA. All rights reserved.</p>
      <div class="social-icons">
        <a href="#"><img src="images/facebook.png" alt="Facebook" /></a>
        <a href="#"><img src="images/whatsapp.png" alt="WhatsApp" /></a>
        <a href="#"><img src="images/instagram.png" alt="Instagram" /></a>
      </div>
    </footer>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="modal">
      <div class="modal-content">
        <span class="close" id="modal-close">&times;</span>
        <h2>Admin Sign In</h2>
        <input type="text" id="admin-username" placeholder="Username" />
        <input type="password" id="admin-password" placeholder="Password" />
        <button id="login-submit">Login</button>
      </div>
    </div>

    <!-- Main App Script -->
    <script type="module">
      import {
        notAdminAlert,
        showLogin,
        closeLoginModal,
        adminLogin,
        isAdminLoggedIn,
        getAdminUsername,
        logoutAdmin,
      } from "./js/auth.js";

      // Make functions globally accessible
      window.notAdminAlert = notAdminAlert;
      window.showLogin = showLogin;
      window.closeLoginModal = closeLoginModal;
      window.adminLogin = adminLogin;
      window.logoutAdmin = logoutAdmin;

      window.onload = () => {
        // Show admin panel if logged in
        if (isAdminLoggedIn()) {
          document.getElementById("admin-panel").style.display = "flex";
          document.getElementById("admin-name").textContent =
            getAdminUsername();
          document.getElementById("login-btn").style.display = "none";
        }

        // Attach navigation button events
        document
          .getElementById("register-btn")
          .addEventListener("click", notAdminAlert);
        document
          .getElementById("transaction-btn")
          .addEventListener("click", notAdminAlert);

        // Attach login button event
        document
          .getElementById("login-btn")
          .addEventListener("click", showLogin);

        // Modal close
        document
          .getElementById("modal-close")
          .addEventListener("click", closeLoginModal);

        // Login submit
        document
          .getElementById("login-submit")
          .addEventListener("click", adminLogin);

        // Logout button
        const logoutBtn = document.getElementById("logout-btn");
        if (logoutBtn) logoutBtn.addEventListener("click", logoutAdmin);
      };
    </script>
  </body>
</html>
